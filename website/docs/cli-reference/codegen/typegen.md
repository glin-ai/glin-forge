---
title: glin-forge typegen
description: Generate TypeScript types and React hooks from contract ABIs
---

# glin-forge typegen

Generate TypeScript types and React hooks from contract ABIs.

## Synopsis

```bash
glin-forge typegen [OPTIONS]
```

## Description

The `typegen` command generates TypeScript interfaces and optionally React hooks from your contract's metadata (ABI). This enables type-safe contract interaction in your frontend applications.

## Options

### `-a, --abi <PATH>`

Path to the contract metadata JSON file.

- Usually located at `./target/ink/metadata.json`
- Auto-detected if not specified

### `-c, --contract <ADDRESS>`

Contract address to fetch ABI from on-chain.

- Alternative to `--abi`
- Fetches metadata from deployed contract
- Requires network connection

### `-o, --output <DIR>`

Output directory for generated files.

- **Default**: `./types`
- Creates directory if it doesn't exist

### `-n, --network <NETWORK>`

Network to use when fetching contract ABI.

- **Default**: `testnet`
- Only used with `--contract` option

### `--hooks`

Generate React hooks in addition to TypeScript types.

- Creates `use<ContractName>.ts` file
- Ready to use with `@glin-ai/sdk-react`

### `-h, --help`

Print help information.

## Examples

### Generate from Local ABI

```bash
glin-forge typegen --abi ./target/ink/metadata.json
```

### Generate with Default Detection

```bash
glin-forge typegen
```

Auto-detects `./target/ink/metadata.json`.

### Generate to Custom Directory

```bash
glin-forge typegen --output ./frontend/src/contracts
```

### Generate with React Hooks

```bash
glin-forge typegen --hooks
```

### Generate from Deployed Contract

```bash
glin-forge typegen \
  --contract 5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty \
  --network testnet \
  --output ./types
```

### Full Example

```bash
glin-forge typegen \
  --abi ./target/ink/metadata.json \
  --output ./frontend/src/contracts \
  --hooks
```

## Output

### Success Output

```
Generating TypeScript types...

✓ Parsed contract metadata
  Contract: MyToken
  Version: 0.1.0
  Constructors: 1
  Messages: 6
  Events: 2

✓ Generated types: ./types/MyToken.ts
✓ Generated hooks: ./types/useMyToken.ts

Files created:
  - types/MyToken.ts (TypeScript interfaces)
  - types/useMyToken.ts (React hooks)

Next steps:
  1. Import types in your frontend:
     import { MyTokenContract } from './types/MyToken'

  2. Use React hooks:
     import { useMyToken } from './types/useMyToken'

  3. Install dependencies:
     npm install @glin-ai/sdk-react
```

### Generated Files

**types/MyToken.ts:**
```typescript
// Generated by glin-forge typegen
// Contract: MyToken v0.1.0

import type { TxResult } from '@glin-ai/sdk'

/**
 * Query interface for MyToken contract
 * Read-only methods that don't modify state
 */
export interface MyTokenContractQuery {
  /**
   * Get balance of an account
   * @param account - Account address
   * @returns Account balance
   */
  balanceOf: (account: string) => Promise<bigint>

  /**
   * Get total token supply
   * @returns Total supply
   */
  totalSupply: () => Promise<bigint>

  /**
   * Get allowance for spender
   * @param owner - Token owner
   * @param spender - Approved spender
   * @returns Approved amount
   */
  allowance: (owner: string, spender: string) => Promise<bigint>
}

/**
 * Transaction interface for MyToken contract
 * State-changing methods that cost gas
 */
export interface MyTokenContractTx {
  /**
   * Transfer tokens to recipient
   * @param to - Recipient address
   * @param amount - Amount to transfer
   * @returns Transaction result
   */
  transfer: (to: string, amount: bigint) => Promise<TxResult>

  /**
   * Approve spender to spend tokens
   * @param spender - Spender address
   * @param amount - Amount to approve
   * @returns Transaction result
   */
  approve: (spender: string, amount: bigint) => Promise<TxResult>

  /**
   * Transfer tokens from one account to another
   * @param from - Source address
   * @param to - Destination address
   * @param amount - Amount to transfer
   * @returns Transaction result
   */
  transferFrom: (from: string, to: string, amount: bigint) => Promise<TxResult>
}

/**
 * Complete contract interface
 */
export interface MyTokenContract {
  query: MyTokenContractQuery
  tx: MyTokenContractTx
  address: string
}

/**
 * Contract events
 */
export interface MyTokenEvents {
  Transfer: {
    from: string
    to: string
    value: bigint
  }
  Approval: {
    owner: string
    spender: string
    value: bigint
  }
}
```

**types/useMyToken.ts (with --hooks):**
```typescript
// Generated by glin-forge typegen
// React hooks for MyToken contract

import { useContract } from '@glin-ai/sdk-react'
import type { MyTokenContract } from './MyToken'
import metadata from './metadata.json'

/**
 * Hook to interact with MyToken contract
 *
 * @param address - Contract address
 * @param signer - Optional signer for transactions
 * @returns Contract instance with loading and error states
 *
 * @example
 * ```tsx
 * function TokenBalance({ address }) {
 *   const { contract, loading } = useMyToken(address)
 *
 *   if (loading) return <div>Loading...</div>
 *
 *   return <div>Contract: {contract.address}</div>
 * }
 * ```
 */
export function useMyToken(address: string, signer?: any) {
  const { contract, loading, error } = useContract<MyTokenContract>({
    address,
    abi: metadata,
    signer,
  })

  return { contract, loading, error }
}

/**
 * Hook for contract queries (read-only)
 *
 * @param address - Contract address
 * @returns Contract query interface
 *
 * @example
 * ```tsx
 * const { query } = useMyTokenQuery(contractAddress)
 * const balance = await query.balanceOf(userAddress)
 * ```
 */
export function useMyTokenQuery(address: string) {
  const { contract, loading, error } = useMyToken(address)

  return { query: contract?.query, loading, error }
}

/**
 * Hook for contract transactions (state-changing)
 *
 * @param address - Contract address
 * @param signer - Signer for transactions
 * @returns Contract transaction interface
 *
 * @example
 * ```tsx
 * const { tx } = useMyTokenTx(contractAddress, signer)
 * await tx.transfer(recipient, 1000n)
 * ```
 */
export function useMyTokenTx(address: string, signer: any) {
  const { contract, loading, error } = useMyToken(address, signer)

  return { tx: contract?.tx, loading, error }
}
```

## Type Mapping

The typegen command maps ink! types to TypeScript:

| ink! Type | TypeScript Type | Example |
|-----------|-----------------|---------|
| `u8`, `u16`, `u32`, `u64`, `u128`, `Balance` | `bigint` | `1000000n` |
| `String`, `&str` | `string` | `"MyToken"` |
| `bool` | `boolean` | `true` |
| `AccountId` | `string` | `"5GrwvaEF..."` |
| `Vec<T>` | `T[]` | `[1, 2, 3]` |
| `Option<T>` | `T \| null` | `100` or `null` |
| `Result<T, E>` | `T \| Error` | Throws on error |
| Custom struct | Interface | `{ field: value }` |

## Using Generated Types

### React Component

```tsx
import { useMyToken } from './types/useMyToken'
import { useState, useEffect } from 'react'

function TokenBalance({ contractAddress, userAddress }) {
  const { contract, loading, error } = useMyToken(contractAddress)
  const [balance, setBalance] = useState<bigint>(0n)

  useEffect(() => {
    if (contract) {
      contract.query.balanceOf(userAddress).then(setBalance)
    }
  }, [contract, userAddress])

  if (loading) return <div>Loading contract...</div>
  if (error) return <div>Error: {error.message}</div>

  return (
    <div>
      Balance: {balance.toString()} tokens
    </div>
  )
}
```

### TypeScript Application

```typescript
import { Contract } from '@glin-ai/sdk'
import type { MyTokenContract } from './types/MyToken'
import metadata from './target/ink/metadata.json'

async function main() {
  const contract = new Contract<MyTokenContract>({
    address: '5FHneW46...',
    abi: metadata,
  })

  // Type-safe query
  const balance = await contract.query.balanceOf('5GrwvaEF...')
  console.log('Balance:', balance)

  // Type-safe transaction
  const result = await contract.tx.transfer('5FrLwHLX...', 1000n)
  console.log('Transfer:', result.hash)
}
```

### With Next.js

```tsx
// pages/token.tsx
import { useMyToken } from '../types/useMyToken'
import { useAccount } from '@glin-ai/sdk-react'

export default function TokenPage() {
  const contractAddress = '5FHneW46...'
  const { account } = useAccount()
  const { contract, loading } = useMyToken(contractAddress, account?.signer)

  const handleTransfer = async () => {
    if (!contract) return

    const result = await contract.tx.transfer(
      '5FrLwHLX...',
      1000n
    )

    console.log('Transaction:', result.hash)
  }

  if (loading) return <p>Loading...</p>

  return (
    <div>
      <h1>Token Contract</h1>
      <button onClick={handleTransfer}>
        Transfer Tokens
      </button>
    </div>
  )
}
```

## Dependencies

Install required packages in your frontend:

```bash
npm install @glin-ai/sdk @glin-ai/sdk-react
```

Or with yarn:

```bash
yarn add @glin-ai/sdk @glin-ai/sdk-react
```

## Workflow Integration

### After Building

Generate types after each build:

```bash
glin-forge build --release
glin-forge typegen --output ./frontend/src/contracts --hooks
```

### Script in package.json

```json
{
  "scripts": {
    "build:contract": "glin-forge build --release",
    "generate:types": "glin-forge typegen --output ./src/contracts --hooks",
    "build": "npm run build:contract && npm run generate:types"
  }
}
```

### Watch for Changes

```bash
# Terminal 1: Watch contract changes
cargo watch -x "contract build"

# Terminal 2: Regenerate types on metadata change
watch -n 1 'glin-forge typegen --output ./types --hooks'
```

## Advanced Usage

### Multiple Contracts

Generate types for multiple contracts:

```bash
# Contract 1
glin-forge typegen \
  --abi ./contracts/token/target/ink/metadata.json \
  --output ./types/token \
  --hooks

# Contract 2
glin-forge typegen \
  --abi ./contracts/nft/target/ink/metadata.json \
  --output ./types/nft \
  --hooks
```

### Custom Type Definitions

Extend generated types:

```typescript
// types/MyTokenExtended.ts
import type { MyTokenContract } from './MyToken'

export interface MyTokenContractExtended extends MyTokenContract {
  // Add custom helper methods
  helpers: {
    formatBalance: (balance: bigint) => string
    parseAmount: (amount: string) => bigint
  }
}
```

## Troubleshooting

### Metadata Not Found

**Problem:**
```
✗ Error: Metadata file not found at ./target/ink/metadata.json
```

**Solution:**
Build the contract first:
```bash
glin-forge build --release
glin-forge typegen
```

### Invalid ABI

**Problem:**
```
✗ Error: Failed to parse metadata
  Invalid JSON or wrong format
```

**Solution:**
Ensure metadata is valid ink! v5 format. Rebuild:
```bash
glin-forge build --release
```

### Type Errors in Frontend

**Problem:**
TypeScript compilation errors after generating types.

**Solution:**
1. Ensure `@glin-ai/sdk` is installed
2. Check TypeScript version (>= 4.5)
3. Regenerate types:
   ```bash
   glin-forge typegen --hooks
   ```

## Tips

### JSDoc Comments

Generated types include JSDoc comments from your contract:

```rust
#[ink(message)]
/// Transfer tokens to recipient
///
/// # Arguments
/// * `to` - Recipient address
/// * `amount` - Amount to transfer
pub fn transfer(&mut self, to: AccountId, amount: Balance) -> Result<()> {
    // ...
}
```

Becomes:

```typescript
/**
 * Transfer tokens to recipient
 * @param to - Recipient address
 * @param amount - Amount to transfer
 */
transfer: (to: string, amount: bigint) => Promise<TxResult>
```

### Versioning

Include contract version in generated files:

```typescript
// Generated by glin-forge typegen
// Contract: MyToken v0.1.0
// Generated: 2025-01-15T10:30:00Z
```

### Git Integration

Add generated types to version control:

```bash
# .gitignore
# Don't ignore generated types
!types/
```

Or regenerate in CI:

```yaml
# .github/workflows/build.yml
- name: Generate Types
  run: |
    glin-forge build --release
    glin-forge typegen --output ./types --hooks
```

## Related Commands

- [`build`](../project/build) - Build contract before generating types
- [`deploy`](../deployment/deploy) - Deploy contract to use types
- [`query`](../interaction/query) - Query with type-safe interface

## See Also

- [Frontend Integration Guide](../../guides/frontend-integration)
- [React Hooks](../../code-generation/react-hooks)
- [TypeScript Types](../../code-generation/typescript-types)
- [Type Mapping](../../code-generation/type-mapping)
